<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>General Information</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg bg-danger navbar-dark py-3">
        <div class="container">
            <a href="#" class="navbar-brand">Life Planner</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navmenu">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a href="/" class="nav-link">Home</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Input Form Section -->
    <div class="container mt-5">
        <h1 class="mb-4 text-center">General Information</h1>
        <form action="/general" method="post" class="p-4 border rounded bg-light">
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="gross_salary" class="form-label">Gross Salary (in CHF):
                        <a href="#" class="text-decoration-none" data-bs-toggle="tooltip" data-bs-placement="top" title="Your annual salary before any deductions or taxes.">
                            <i class="bi bi-question-circle"></i>
                        </a>
                    </label>
                    <input type="number" id="gross_salary" name="gross_salary" class="form-control" min="0" required placeholder="Enter your annual gross salary">
                </div>
                <div class="col-md-6">
                    <label for="wealth" class="form-label">Total Wealth (in CHF):
                        <a href="#" class="text-decoration-none" data-bs-toggle="tooltip" data-bs-placement="top" title="The total value of your assets, including savings, investments, and properties.">
                            <i class="bi bi-question-circle"></i>
                        </a>
                    </label>
                    <input type="number" id="wealth" name="wealth" class="form-control" min="0" required placeholder="Enter your total wealth">
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="age" class="form-label">Age:
                        <a href="#" class="text-decoration-none" data-bs-toggle="tooltip" data-bs-placement="top" title="Your current age in years.">
                            <i class="bi bi-question-circle"></i>
                        </a>
                    </label>
                    <input type="number" id="age" name="age" class="form-control" min="18" required placeholder="Enter your age">
                </div>
                <div class="col-md-6">
                    <label for="location" class="form-label">Where do you currently live? (Municipality):
                        <a href="#" class="text-decoration-none" data-bs-toggle="tooltip" data-bs-placement="top" title="The municipality or town where you reside.">
                            <i class="bi bi-question-circle"></i>
                        </a>
                    </label>
                    <div class="position-relative">
                        <input type="text" id="location" name="location" class="form-control" required placeholder="Enter your Municipality, e.g. Thalwil">
                        <ul id="suggestions" class="suggestion-list d-none"></ul>
                    </div> 
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="retirement_age" class="form-label">When do you want to retire?:
                        <a href="#" class="text-decoration-none" data-bs-toggle="tooltip" data-bs-placement="top" title="The age at which you plan to stop working and retire.">
                            <i class="bi bi-question-circle"></i>
                        </a>
                    </label>
                    <input type="text" id="retirement_age" name="retirement_age" class="form-control" required placeholder="Enter your preferred retirement age">
                </div>
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-danger">Next</button>
            </div>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });

        const allMunicipalities = [
        "Adliswil","Aesch","Aeugst am Albis","Affoltern am Albis","Altikon","Andelfingen","Bachenbülach","Bachs","Bassersdorf","Bauma","Benken","Berg am Irchel","Birmensdorf",
        "Bonstetten","Boppelsen","Brütten","Bubikon","Buch am Irchel","Buchs" ,"Bäretswil","Bülach","Dachsen","Dielsdorf","Dietikon","Dietlikon",
        "Dinhard","Dorf","Dägerlen","Dällikon","Dänikon","Dättlikon","Dübendorf","Dürnten","Egg","Eglisau","Elgg","Ellikon an der Thur","Elsau",
        "Embrach","Erlenbach" ,"Fehraltorf","Feuerthalen","Fischenthal","Flaach","Flurlingen","Freienstein-Teufen","Fällanden","Geroldswil","Glattfelden",
        "Gossau" ,"Greifensee","Grüningen","Hagenbuch","Hausen am Albis","Hedingen","Henggart","Herrliberg","Hettlingen","Hinwil","Hittnau","Hochfelden",
        "Hombrechtikon","Horgen","Höri","Hüntwangen","Hüttikon","Illnau-Effretikon","Kappel am Albis","Kilchberg","Kleinandelfingen","Kloten","Knonau",
        "Küsnacht" ,"Langnau am Albis","Laufen-Uhwiesen","Lindau","Lufingen","Marthalen","Maschwanden","Maur","Meilen","Mettmenstetten","Männedorf","Mönchaltorf",
        "Neerach","Neftenbach","Niederglatt","Niederhasli","Niederweningen","Nürensdorf","Oberembrach","Oberengstringen","Oberglatt","Oberrieden",
        "Oberweningen","Obfelden","Oetwil am See","Oetwil an der Limmat","Opfikon","Ossingen","Otelfingen","Ottenbach","Pfungen","Pfäffikon","Rafz",
        "Regensberg","Regensdorf","Rheinau","Richterswil","Rickenbach" ,"Rifferswil","Rorbas","Russikon","Rümlang","Rüschlikon","Rüti","Schlatt",
        "Schleinikon", "Schlieren","Schwerzenbach","Schöfflisdorf","Seegräben","Seuzach","Stadel","Stallikon","Stammheim","Stammheim","Steinmaur",
        "Stäfa","Thalheim an der Thur", "Thalwil", "Truttikon", "Trüllikon", "Turbenthal", "Uetikon am See", "Uitikon","Unterengstringen","Urdorf",
        "Uster","Volken","Volketswil","Wald" ,"Wallisellen","Wangen-Brüttisellen","Wasterkingen","Weiach","Weiningen","Weisslingen","Wettswil am Albis",
        "Wetzikon","Wiesendangen","Wil","Wila","Wildberg","Winkel","Winterthur","Wädenswil","Zell" ,"Zollikon","Zumikon","Zürich" 
        ];

        const inputField = document.getElementById('location');
        const suggestionBox = document.getElementById('suggestions');

        inputField.addEventListener('input', function() {
            const query = this.value.trim().toLowerCase();
            if (query.length === 0) {
                suggestionBox.innerHTML = '';
                suggestionBox.classList.add('d-none');
                return;
            }

            const filtered = allMunicipalities.filter(item => item.toLowerCase().startsWith(query));

            if (filtered.length === 0) {
                suggestionBox.innerHTML = '';
                suggestionBox.classList.add('d-none');
                return;
            }

            suggestionBox.innerHTML = '';
            filtered.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                li.onclick = () => {
                    inputField.value = item;
                    suggestionBox.innerHTML = '';
                    suggestionBox.classList.add('d-none');
                };
                suggestionBox.appendChild(li);
            });
            suggestionBox.classList.remove('d-none');
        });

        // Hide suggestions when clicking outside
        document.addEventListener('click', function(event) {
            if (!event.target.closest('#location')) {
                suggestionBox.classList.add('d-none');
                suggestionBox.innerHTML = '';
            }
        });
    </script>
</body>
</html>
